# Gumtree Supply-Side Intelligence Engine

A Reveal.js presentation pitching Gumtree's supply-side intelligence capabilities, using dogs as an illustrative case study.

## Quick Start

```bash
# Full rebuild from data
python3 canonical_metrics.py              # Generate metrics JSON
python3 gumtree_deck/build_deck.py        # Render template → index.html
python3 gumtree_deck/scripts/export_pdf.py # Export to PDF

# Or just serve locally (if already built)
cd gumtree_deck
python3 -m http.server 8000
# Open http://localhost:8000
```

## Build Pipeline

```
canonical_metrics.json     templates/index.html.j2
        ↓                          ↓
        └──────→ build_deck.py ←───┘
                      ↓
                 index.html
                      ↓
              scripts/export_pdf.py
                      ↓
                  deck.pdf
```

### Data Source

All slide data comes from `canonical_metrics.json` in the project root. This file is generated by `canonical_metrics.py` from the derived.csv pipeline output.

### Template System

The deck uses Jinja2 templating:

- **Template**: `templates/index.html.j2` - Contains `{{ variable }}` bindings
- **Output**: `index.html` - Generated static HTML (git-tracked)
- **Build script**: `build_deck.py` - Renders template with data

### Custom Filters

| Filter | Purpose | Example |
|--------|---------|---------|
| `format_k` | Thousands with k suffix | 59000 → "59k" |
| `format_comma` | Comma-separated | 59000 → "59,000" |
| `format_pct` | Percentage (0-1 input) | 0.815 → "81.5%" |
| `format_int` | Integer rounding | 81.5 → "82" |
| `format_price` | Currency | 1500 → "£1,500" |

## Prerequisites

```bash
# Core dependencies
pip install jinja2 pandas

# PDF export (optional)
pip install playwright pillow
playwright install chromium
```

## Structure

```
gumtree_deck/
├── index.html              # Generated presentation (19 slides)
├── theme.css               # Custom dark/orange theme
├── deck.pdf                # Generated PDF output
├── build_deck.py           # Template renderer
├── templates/
│   └── index.html.j2       # Jinja2 template
├── scripts/
│   └── export_pdf.py       # Playwright PDF exporter
└── vendor/                 # Reveal.js 5.1.0 (offline)
    ├── dist/
    └── plugin/
```

## Slides Overview

### Section A: Gumtree Framing (Slides 1-5)
1. Cover - "Supply-Side Intelligence Engine"
2. Gumtree's unique data position
3. Current blind spots vs. potential
4. What the engine does - data pipeline
5. Case study intro - transition to dogs

### Section B: Dogs Case Study (Slides 6-15)
6. Market coverage - 10 platforms, 59K dogs
7. Deduplication - cross-platform matching
8. Platform breakdown table
9. Top 10 sellers - multi-platform analysis
10. Compliance signals - license tracking
11. Data freshness by platform
12. Puppy age distribution
13. 8-week regulation compliance
14. Top breeds by count and price
15. Geographic distribution

### Section C: Generalise & Close (Slides 16-19)
16. Other verticals - motors, jobs, property
17. Coverage matrix - full vs. partial
18. Next steps
19. Close - contact

## Keyboard Shortcuts

- **Arrow keys**: Navigate slides
- **F**: Fullscreen
- **S**: Speaker notes
- **O**: Overview mode
- **ESC**: Exit fullscreen/overview

## Customization

### Updating Data

1. Regenerate `canonical_metrics.json` (run `python3 canonical_metrics.py`)
2. Rebuild the deck: `python3 gumtree_deck/build_deck.py`
3. Export PDF: `python3 gumtree_deck/scripts/export_pdf.py`

### Modifying Slides

Edit `templates/index.html.j2` directly. Use Jinja2 syntax:

```html
<!-- Simple value -->
<div class="stat">{{ summary.unique_puppies | format_k }}</div>

<!-- Loop -->
{% for seller in sellers.top_10 %}
<div class="row">{{ seller.name }} - {{ seller.total_listings }}</div>
{% endfor %}

<!-- Conditional -->
{% if platform.has_license_tracking %}Yes{% else %}None{% endif %}
```

### Theme Colors

Edit `theme.css`:
- `--gt-bg`: Background color (#1a1a1a)
- `--gt-orange`: Accent color (#f97316)
- `--gt-text`: Primary text (#fff)
- `--gt-text-muted`: Secondary text (#94a3b8)

## Notes

- Presentation is 16:9 aspect ratio
- Works fully offline (Reveal.js bundled)
- PDF export captures slides at 2x resolution for crisp output
